[gd_scene load_steps=16 format=3 uid="uid://dt87dmd0l0vdc"]

[ext_resource type="PackedScene" uid="uid://mskcwn1a1v6d" path="res://addons/phantom_camera/examples/example_scenes/3D/sub_scenes/playable_character_third_person_3d.tscn" id="1_n2kti"]
[ext_resource type="PackedScene" uid="uid://d0p14r0fe04dd" path="res://scenes/npc.tscn" id="2_httow"]
[ext_resource type="Script" uid="uid://3r2syidagjkl" path="res://addons/phantom_camera/examples/scripts/3D/player_controller_third_person_4.4.gd" id="2_unidx"]
[ext_resource type="Script" uid="uid://crt48wecltrda" path="res://addons/phantom_camera/scripts/phantom_camera/phantom_camera_3d.gd" id="3_dsagd"]
[ext_resource type="Script" uid="uid://ui8nenucifea" path="res://code/game_ui.gd" id="3_httow"]
[ext_resource type="Texture2D" uid="uid://bjowqfm5dtiv1" path="res://E-Key-Sprite.png" id="3_snpff"]
[ext_resource type="Script" uid="uid://bbixea7raf8yd" path="res://addons/phantom_camera/scripts/resources/tween_resource.gd" id="4_0jnl2"]
[ext_resource type="Script" uid="uid://d0n5rs8usomab" path="res://addons/phantom_camera/scripts/resources/camera_3d_resource.gd" id="5_xbnuk"]
[ext_resource type="Script" uid="uid://dj176rc88xie1" path="res://addons/phantom_camera/scripts/phantom_camera_host/phantom_camera_host.gd" id="6_0jnl2"]

[sub_resource type="Resource" id="Resource_ehb08"]
script = ExtResource("4_0jnl2")
duration = 0.3
transition = 2
ease = 1

[sub_resource type="Resource" id="Resource_epw4j"]
script = ExtResource("5_xbnuk")
cull_mask = 1048575
h_offset = 0.0
v_offset = 0.0
projection = 0
fov = 75.0
size = 1.0
frustum_offset = Vector2(0, 0)
near = 0.05
far = 4000.0

[sub_resource type="BoxShape3D" id="BoxShape3D_58akw"]
size = Vector3(20, 1, 20)

[sub_resource type="BoxMesh" id="BoxMesh_58akw"]
size = Vector3(20, 1, 20)

[sub_resource type="BoxShape3D" id="BoxShape3D_e51mn"]

[sub_resource type="BoxMesh" id="BoxMesh_snpff"]

[node name="movement-test" type="Node3D"]

[node name="PlayerCharacterBody3D" parent="." instance=ExtResource("1_n2kti")]
transform = Transform3D(0.999903, 0.0139622, 0, -0.0139622, 0.999903, 0, 0, 0, 1, -0.0194088, 1.01471, -0.0163251)
script = ExtResource("2_unidx")
JUMP_VELOCITY = 12.0
GRAVITY = 50.0

[node name="PlayerPhantomCamera3D" type="Node3D" parent="." node_paths=PackedStringArray("follow_target")]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 0.866023, 0.499997, 0, -0.499999, 0.866021, -0.0194088, 2.7647, 3.01475)
script = ExtResource("3_dsagd")
priority = 10
follow_mode = 6
follow_target = NodePath("../PlayerCharacterBody3D")
tween_resource = SubResource("Resource_ehb08")
tween_on_load = false
camera_3d_resource = SubResource("Resource_epw4j")
follow_damping = true
follow_distance = 3.5
spring_length = 3.5

[node name="MainCamera3D" type="Camera3D" parent="."]
unique_name_in_owner = true
physics_interpolation_mode = 1
transform = Transform3D(1, 0, 0, 0, 0.866025, 0.5, 0, -0.5, 0.866025, -0.0194088, 2.7647, 3.01475)

[node name="PhantomCameraHost" type="Node" parent="MainCamera3D"]
process_priority = 300
process_physics_priority = 300
script = ExtResource("6_0jnl2")

[node name="Ground" type="StaticBody3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Ground"]
transform = Transform3D(1, 0, 0, 0, 0.1, 0, 0, 0, 1, -5, 0, -1)
shape = SubResource("BoxShape3D_58akw")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Ground"]
transform = Transform3D(1, 0, 0, 0, 0.1, 0, 0, 0, 1, -5, 0, -1)
mesh = SubResource("BoxMesh_58akw")

[node name="Platform" type="StaticBody3D" parent="."]
transform = Transform3D(1.888, 0, 0, 0, 0.592, 0, 0, 0, 3, -8.59597, 0.573459, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Platform"]
shape = SubResource("BoxShape3D_e51mn")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Platform"]
mesh = SubResource("BoxMesh_snpff")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.285153, 0.958482, 0, -0.651183, 0.19373, 0.733777, 0.703312, -0.209239, 0.67939, -7.53261, 14.0544, 0)

[node name="NPC" parent="." instance=ExtResource("2_httow")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -11.7742, 1.06633, 6.08828)
npc_text = "Hi! I am a NPC in the test level!"

[node name="Game Ui" type="Control" parent="." node_paths=PackedStringArray("interact_button_sprite", "dialogue_panel", "dialogue_label")]
layout_mode = 3
anchor_right = 1.0
anchor_bottom = 1.011
offset_right = 3.0
offset_bottom = -0.128052
mouse_filter = 2
script = ExtResource("3_httow")
interact_button_sprite = NodePath("E-Key")
dialogue_panel = NodePath("Dialogue Panel")
dialogue_label = NodePath("Dialogue Panel/Dialogue Label")

[node name="E-Key" type="Sprite2D" parent="Game Ui"]
visible = false
position = Vector2(1067, 563)
scale = Vector2(3, 3)
texture = ExtResource("3_snpff")

[node name="Dialogue Panel" type="Panel" parent="Game Ui"]
visible = false
layout_mode = 0
offset_left = 19.0
offset_top = 513.0
offset_right = 1012.0
offset_bottom = 635.0

[node name="Dialogue Label" type="Label" parent="Game Ui/Dialogue Panel"]
layout_mode = 1
anchors_preset = -1
anchor_right = 0.999
anchor_bottom = 1.0
offset_left = 5.0
offset_right = -4.00708
text = "Some dialogue text goes here. It could be pretty long actually. Blah. Some dialogue text goes here. It could be pretty long actually. Blah. Some dialogue text goes here. It could be pretty long actually. Blah.Some dialogue text goes here. It could be pretty long actually. Blah ."
vertical_alignment = 1
autowrap_mode = 2
